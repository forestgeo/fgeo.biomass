<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculate Biomass • fgeo.biomass</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Calculate Biomass">
<meta property="og:description" content="Calculate biomass using allometric equations from
    allodb.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">fgeo.biomass</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/maurolepore">
    <span class="fa fa-gavel"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/forestgeo/fgeo.biomass">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://forestgeo.github.io/fgeo/">fgeo</a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="calculate-biomass" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#calculate-biomass" class="anchor"></a><img src="https://i.imgur.com/vTLlhbp.png" align="right" height="88"> Calculate biomass</h1></div>

<p>The goal of <strong>fgeo.biomass</strong> is to calculate biomass using allometric equations from the <strong>allodb</strong> package.</p>
<div id="warning" class="section level2">
<h2 class="hasAnchor">
<a href="#warning" class="anchor"></a>Warning</h2>
<p>This package is not ready for research. This is work in progress and you are encouraged to try this package and suggest improvements but you should not trust the results yet.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install the development version of <strong>fgeo.biomass</strong>:</p>
<pre><code><a href="http://www.rdocumentation.org/packages/devtools/topics/reexports"># install.packages("devtools")
devtools::install_github("forestgeo/fgeo.biomass")</a></code></pre>
<p>For details on how to install packages from GitHub, see <a href="https://goo.gl/dQKEeg">this article</a>.</p>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">library</span>(fgeo.biomass)</a></code></pre></div>
<div id="basics" class="section level3">
<h3 class="hasAnchor">
<a href="#basics" class="anchor"></a>Basics</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">census &lt;-<span class="st"> </span>allodb<span class="op">::</span>scbi_tree1</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">species &lt;-<span class="st"> </span>allodb<span class="op">::</span>scbi_species</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">dbh_species &lt;-<span class="st"> </span><span class="kw"><a href="reference/census_species.html">census_species</a></span>(census, species, <span class="dt">site =</span> <span class="st">"scbi"</span>)</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">dbh_species</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; # A tibble: 40,283 x 4</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt;    rowid site  sp                     dbh</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt;  * &lt;int&gt; &lt;chr&gt; &lt;chr&gt;                &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt;  1     1 scbi  lindera benzoin       27.9</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt;  2     2 scbi  lindera benzoin       23.7</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt;  3     3 scbi  lindera benzoin       22.2</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt;  4     4 scbi  nyssa sylvatica      135  </span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt;  5     5 scbi  hamamelis virginiana  87  </span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt;  6     6 scbi  hamamelis virginiana  22.5</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt;  7     7 scbi  unidentified unk      42.6</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt;  8     8 scbi  lindera benzoin       51.4</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt;  9     9 scbi  viburnum prunifolium  38.3</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt; 10    10 scbi  asimina triloba       14.5</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt; # ... with 40,273 more rows</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"></a>
<a class="sourceLine" id="cb3-20" data-line-number="20">equations &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_equations.html">get_equations</a></span>(dbh_species)</a>
<a class="sourceLine" id="cb3-21" data-line-number="21">equations</a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="co">#&gt; # A tibble: 5 x 2</span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="co">#&gt;   eqn_type       data                 </span></a>
<a class="sourceLine" id="cb3-24" data-line-number="24"><span class="co">#&gt;   &lt;chr&gt;          &lt;list&gt;               </span></a>
<a class="sourceLine" id="cb3-25" data-line-number="25"><span class="co">#&gt; 1 species        &lt;tibble [8,930 x 8]&gt; </span></a>
<a class="sourceLine" id="cb3-26" data-line-number="26"><span class="co">#&gt; 2 genus          &lt;tibble [5,642 x 8]&gt; </span></a>
<a class="sourceLine" id="cb3-27" data-line-number="27"><span class="co">#&gt; 3 mixed_hardwood &lt;tibble [5,516 x 8]&gt; </span></a>
<a class="sourceLine" id="cb3-28" data-line-number="28"><span class="co">#&gt; 4 family         &lt;tibble [10,141 x 8]&gt;</span></a>
<a class="sourceLine" id="cb3-29" data-line-number="29"><span class="co">#&gt; 5 woody_species  &lt;tibble [0 x 8]&gt;</span></a></code></pre></div>
</div>
<div id="manipulate-equations" class="section level3">
<h3 class="hasAnchor">
<a href="#manipulate-equations" class="anchor"></a>Manipulate equations</h3>
<p>You can use popular(tools to manipulate the nested dataframe of equations. For example:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">filter</span>(equations, eqn_type <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">"species"</span>, <span class="st">"mixed_hardwood"</span>))</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#&gt; # A tibble: 2 x 2</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt;   eqn_type       data                </span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt;          &lt;list&gt;              </span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt; 1 species        &lt;tibble [8,930 x 8]&gt;</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt; 2 mixed_hardwood &lt;tibble [5,516 x 8]&gt;</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co"># Same</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8">equations <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">slice</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt; # A tibble: 2 x 2</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt;   eqn_type       data                </span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt;   &lt;chr&gt;          &lt;list&gt;              </span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt; 1 species        &lt;tibble [8,930 x 8]&gt;</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt; 2 mixed_hardwood &lt;tibble [5,516 x 8]&gt;</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"></a>
<a class="sourceLine" id="cb4-15" data-line-number="15">equations <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="st">  </span><span class="kw">slice</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="st">  </span><span class="kw">unnest</span>()</a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="co">#&gt; # A tibble: 14,446 x 9</span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19"><span class="co">#&gt;    eqn_type rowid site  sp      dbh equation_id eqn   eqn_source eqn_type1</span></a>
<a class="sourceLine" id="cb4-20" data-line-number="20"><span class="co">#&gt;    &lt;chr&gt;    &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;    </span></a>
<a class="sourceLine" id="cb4-21" data-line-number="21"><span class="co">#&gt;  1 species      4 scbi  nyss~ 135   8da09d      1.54~ default    species  </span></a>
<a class="sourceLine" id="cb4-22" data-line-number="22"><span class="co">#&gt;  2 species     21 scbi  liri~ 232.  34fe5a      1.02~ default    species  </span></a>
<a class="sourceLine" id="cb4-23" data-line-number="23"><span class="co">#&gt;  3 species     29 scbi  acer~ 326.  7c72ed      exp(~ default    species  </span></a>
<a class="sourceLine" id="cb4-24" data-line-number="24"><span class="co">#&gt;  4 species     38 scbi  frax~  42.8 0edaff      0.16~ default    species  </span></a>
<a class="sourceLine" id="cb4-25" data-line-number="25"><span class="co">#&gt;  5 species     72 scbi  acer~ 289.  7c72ed      exp(~ default    species  </span></a>
<a class="sourceLine" id="cb4-26" data-line-number="26"><span class="co">#&gt;  6 species     77 scbi  quer~ 636.  07dba7      1.56~ default    species  </span></a>
<a class="sourceLine" id="cb4-27" data-line-number="27"><span class="co">#&gt;  7 species     79 scbi  tili~ 475   3f99ba      1.44~ default    species  </span></a>
<a class="sourceLine" id="cb4-28" data-line-number="28"><span class="co">#&gt;  8 species     79 scbi  tili~ 475   76d19b      0.00~ default    species  </span></a>
<a class="sourceLine" id="cb4-29" data-line-number="29"><span class="co">#&gt;  9 species     84 scbi  frax~ 170.  0edaff      0.16~ default    species  </span></a>
<a class="sourceLine" id="cb4-30" data-line-number="30"><span class="co">#&gt; 10 species     89 scbi  fagu~  27.2 74186d      2.03~ default    species  </span></a>
<a class="sourceLine" id="cb4-31" data-line-number="31"><span class="co">#&gt; # ... with 14,436 more rows</span></a></code></pre></div>
</div>
<div id="prioritize-equations" class="section level3">
<h3 class="hasAnchor">
<a href="#prioritize-equations" class="anchor"></a>Prioritize equations</h3>
<p>You can prioritize available equations by setting the order in which equations of different types overwrite each other. Here is a toy example to show how this works.</p>
<ul>
<li>Toy data.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">toy_equations &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/tibble/topics/tribble">tribble</a></span>(</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">  <span class="op">~</span>eqn,       <span class="op">~</span>dbh,  <span class="op">~</span>eqn_type, <span class="op">~</span>rowid, <span class="op">~</span>where,</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">  <span class="st">"dbh + 1"</span>,    <span class="dv">10</span>,  <span class="st">"species"</span>,      <span class="dv">1</span>, <span class="st">"rowid only in species"</span>,</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">  <span class="st">"dbh + 1"</span>,    <span class="dv">10</span>,  <span class="st">"species"</span>,      <span class="dv">3</span>, <span class="st">"rowid in both: lhs overwrites rhs"</span>,</a>
<a class="sourceLine" id="cb5-5" data-line-number="5"></a>
<a class="sourceLine" id="cb5-6" data-line-number="6">  <span class="st">"dbh + 2"</span>,    <span class="dv">10</span>,  <span class="st">"genus"</span>,        <span class="dv">2</span>, <span class="st">"rowid only in genus"</span>,</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">  <span class="st">"dbh + 2"</span>,    <span class="dv">10</span>,  <span class="st">"genus"</span>,        <span class="dv">3</span>, <span class="st">"rowid in both: lhs overwrites rhs"</span>,</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">)</a>
<a class="sourceLine" id="cb5-9" data-line-number="9">toy_equations</a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt; # A tibble: 4 x 5</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt;   eqn       dbh eqn_type rowid where                            </span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;                            </span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt; 1 dbh + 1    10 species      1 rowid only in species            </span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt; 2 dbh + 1    10 species      3 rowid in both: lhs overwrites rhs</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt; 3 dbh + 2    10 genus        2 rowid only in genus              </span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">#&gt; 4 dbh + 2    10 genus        3 rowid in both: lhs overwrites rhs</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"></a>
<a class="sourceLine" id="cb5-18" data-line-number="18">toy_nested &lt;-<span class="st"> </span><span class="kw">nest</span>(toy_equations, <span class="op">-</span>eqn_type)</a>
<a class="sourceLine" id="cb5-19" data-line-number="19">toy_nested</a>
<a class="sourceLine" id="cb5-20" data-line-number="20"><span class="co">#&gt; # A tibble: 2 x 2</span></a>
<a class="sourceLine" id="cb5-21" data-line-number="21"><span class="co">#&gt;   eqn_type data            </span></a>
<a class="sourceLine" id="cb5-22" data-line-number="22"><span class="co">#&gt;   &lt;chr&gt;    &lt;list&gt;          </span></a>
<a class="sourceLine" id="cb5-23" data-line-number="23"><span class="co">#&gt; 1 species  &lt;tibble [2 x 4]&gt;</span></a>
<a class="sourceLine" id="cb5-24" data-line-number="24"><span class="co">#&gt; 2 genus    &lt;tibble [2 x 4]&gt;</span></a></code></pre></div>
<ul>
<li>Alternative results.</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">species_overwrites_genus &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"species"</span>, <span class="st">"genus"</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw"><a href="reference/pick_best_equations.html">pick_best_equations</a></span>(toy_nested, <span class="dt">order =</span> species_overwrites_genus)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt; # A tibble: 3 x 5</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt;   eqn_type eqn       dbh rowid where                            </span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;                            </span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt; 1 species  dbh + 1    10     3 rowid in both: lhs overwrites rhs</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; 2 species  dbh + 1    10     1 rowid only in species            </span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt; 3 genus    dbh + 2    10     2 rowid only in genus</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"></a>
<a class="sourceLine" id="cb6-10" data-line-number="10">genus_overwrites_species &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"genus"</span>, <span class="st">"species"</span>)</a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="kw"><a href="reference/pick_best_equations.html">pick_best_equations</a></span>(toy_nested, <span class="dt">order =</span> genus_overwrites_species)</a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt; # A tibble: 3 x 5</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt;   eqn_type eqn       dbh rowid where                            </span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;                            </span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">#&gt; 1 genus    dbh + 2    10     3 rowid in both: lhs overwrites rhs</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="co">#&gt; 2 genus    dbh + 2    10     2 rowid only in genus              </span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="co">#&gt; 3 species  dbh + 1    10     1 rowid only in species</span></a></code></pre></div>
</div>
<div id="calculate-biomass-1" class="section level3">
<h3 class="hasAnchor">
<a href="#calculate-biomass-1" class="anchor"></a>Calculate biomass</h3>
<p>Calculate biomass by evaluating each allometric equations using its corresponding <code>dbh</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">equations <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/pick_best_equations.html">pick_best_equations</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/evaluate_equations.html">evaluate_equations</a></span>()</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt; # A tibble: 30,229 x 10</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt;    eqn_type rowid site  sp      dbh equation_id eqn   eqn_source eqn_type1</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt;    &lt;chr&gt;    &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;    </span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt;  1 family       1 scbi  lind~  27.9 f08fff      exp(~ default    family   </span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt;  2 family       2 scbi  lind~  23.7 f08fff      exp(~ default    family   </span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt;  3 family       3 scbi  lind~  22.2 f08fff      exp(~ default    family   </span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt;  4 family       8 scbi  lind~  51.4 f08fff      exp(~ default    family   </span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt;  5 family      13 scbi  lind~  15.4 f08fff      exp(~ default    family   </span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt;  6 family      14 scbi  lind~  14.8 f08fff      exp(~ default    family   </span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt;  7 family      15 scbi  lind~  15.5 f08fff      exp(~ default    family   </span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt;  8 family      16 scbi  lind~  17.4 f08fff      exp(~ default    family   </span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="co">#&gt;  9 family      17 scbi  lind~  68.2 f08fff      exp(~ default    family   </span></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"><span class="co">#&gt; 10 family      18 scbi  lind~  19.3 f08fff      exp(~ default    family   </span></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="co">#&gt; # ... with 30,219 more rows, and 1 more variable: biomass &lt;dbl&gt;</span></a></code></pre></div>
</div>
<div id="improvements" class="section level3">
<h3 class="hasAnchor">
<a href="#improvements" class="anchor"></a>Improvements</h3>
<p>But the function names will soon change to something like this:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">census <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="st">  </span><span class="kw">add_species</span>(species) <span class="op">%&gt;%</span><span class="st">  </span><span class="co"># instead of census_species()</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="st">  </span><span class="kw">allo_find</span>() <span class="op">%&gt;%</span><span class="st">           </span><span class="co"># instead of get_equations()</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="st">  </span><span class="kw">allo_customize</span>() <span class="op">%&gt;%</span><span class="st">      </span><span class="co"># new function to insert custom equations</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="st">  </span><span class="kw">allo_prioritize</span>()         <span class="co"># instead of pick_best_equations()</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6">  <span class="kw">allo_evaluate</span>()           <span class="co"># instead of evaluate_equations()</span></a></code></pre></div>
<p>Some other possible improvements:</p>
<ul>
<li>Allow using ViewFullTable and ViewTaxonomy.</li>
<li>Allow using any table with the required columns.</li>
<li>Simplify interfaces via generic functions that ‘know’ what to do with different (S3) classes of ForestGEO data – i.e. census and species tables; ViewFullTable and ViewTaxonomy tables; or any two tables of unknown class.</li>
</ul>
</div>
<div id="fgeo-biomass-and-allodb" class="section level3">
<h3 class="hasAnchor">
<a href="#fgeo-biomass-and-allodb" class="anchor"></a>fgeo.biomass and allodb</h3>
<p>Allometric equations come from the <strong>allodb</strong> package.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># Internal</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">fgeo.biomass<span class="op">:::</span>.default_eqn</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt; # A tibble: 619 x 6</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">#&gt;    equation_id site     sp           eqn               eqn_source eqn_type</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt;  * &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt;             &lt;chr&gt;      &lt;chr&gt;   </span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt;  1 2060ea      lilly d~ acer rubrum  10^(1.1891 + 1.4~ default    species </span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt;  2 2060ea      tyson    acer rubrum  10^(1.1891 + 1.4~ default    species </span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt;  3 a4d879      lilly d~ acer saccha~ 10^(1.2315 + 1.6~ default    species </span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co">#&gt;  4 a4d879      tyson    acer saccha~ 10^(1.2315 + 1.6~ default    species </span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="co">#&gt;  5 c59e03      lilly d~ amelanchier~ exp(7.217 + 1.51~ default    genus   </span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="co">#&gt;  6 c59e03      scbi     amelanchier~ exp(7.217 + 1.51~ default    genus   </span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"><span class="co">#&gt;  7 c59e03      serc     amelanchier~ exp(7.217 + 1.51~ default    genus   </span></a>
<a class="sourceLine" id="cb9-13" data-line-number="13"><span class="co">#&gt;  8 c59e03      serc     amelanchier~ exp(7.217 + 1.51~ default    genus   </span></a>
<a class="sourceLine" id="cb9-14" data-line-number="14"><span class="co">#&gt;  9 c59e03      tyson    amelanchier~ exp(7.217 + 1.51~ default    genus   </span></a>
<a class="sourceLine" id="cb9-15" data-line-number="15"><span class="co">#&gt; 10 c59e03      umbc     amelanchier~ exp(7.217 + 1.51~ default    genus   </span></a>
<a class="sourceLine" id="cb9-16" data-line-number="16"><span class="co">#&gt; # ... with 609 more rows</span></a></code></pre></div>
<p>For now we are excluding some equations.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co"># Internal</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2">excluding &lt;-<span class="st"> </span>fgeo.biomass<span class="op">:::</span>.bad_eqn_id</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"></a>
<a class="sourceLine" id="cb10-4" data-line-number="4">allodb<span class="op">::</span>equations <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="st">  </span><span class="kw">filter</span>(equation_id <span class="op">%in%</span><span class="st"> </span>excluding) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="st">  </span><span class="kw">select</span>(equation_id, equation_allometry)</a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt; # A tibble: 25 x 2</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">#&gt;    equation_id equation_allometry         </span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;                      </span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">#&gt;  1 76aa3c      38.111*(dba^2.9)           </span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co">#&gt;  2 28dce6      51.996*(dba^2.77)          </span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="co">#&gt;  3 a1646f      37.637*(dba^2.779)         </span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="co">#&gt;  4 b61369      43.992*(dba^2.86)          </span></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="co">#&gt;  5 5e2dea      29.615*(dba^3.243)         </span></a>
<a class="sourceLine" id="cb10-15" data-line-number="15"><span class="co">#&gt;  6 3cb95a      exp(2.025+3.527*log(dba))  </span></a>
<a class="sourceLine" id="cb10-16" data-line-number="16"><span class="co">#&gt;  7 c94845      51.68+0.02*BA              </span></a>
<a class="sourceLine" id="cb10-17" data-line-number="17"><span class="co">#&gt;  8 6b3b2a      exp(3.67+2.847*log(dba))   </span></a>
<a class="sourceLine" id="cb10-18" data-line-number="18"><span class="co">#&gt;  9 b95baf      exp(3.892+3.122*log(dba))  </span></a>
<a class="sourceLine" id="cb10-19" data-line-number="19"><span class="co">#&gt; 10 e8f868      exp(3.6123+2.9944*log(dba))</span></a>
<a class="sourceLine" id="cb10-20" data-line-number="20"><span class="co">#&gt; # ... with 15 more rows</span></a></code></pre></div>
</div>
</div>
<div id="information" class="section level2">
<h2 class="hasAnchor">
<a href="#information" class="anchor"></a>Information</h2>
<ul>
<li>
<a href="SUPPORT.html">Getting help</a>.</li>
<li>
<a href="CONTRIBUTING.html">Contributing</a>.</li>
<li>
<a href="CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>.</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/forestgeo/fgeo.biomass">https://​github.com/​forestgeo/​fgeo.biomass</a>
</li>
<li>Report a bug at <br><a href="https://github.com/forestgeo/fgeo.biomass/issues">https://​github.com/​forestgeo/​fgeo.biomass/​issues</a>
</li>
<li>Learn more about ForestGEO at <br><a href="http://www.forestgeo.si.edu/">http://​www.forestgeo.si.edu/​</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://github.com/maurolepore">Mauro Lepore</a> <br><small class="roles"> Author, contractor, maintainer </small>  </li>
<li>
<a href="https://forestgeo.si.edu/arellano-gabriel">Gabriel Arellano</a> <br><small class="roles"> Author, reviewer </small>  </li>
<li>
<a href="https://forestgeo.si.edu/stuart-j-davies">Stuart Davies</a> <br><small class="roles"> Author, reviewer </small>  </li>
<li>
<a href="https://github.com/gonzalezeb">Erika Gonzalez</a> <br><small class="roles"> Author, reviewer </small>  </li>
<li>
<a href="https://forestgeo.si.edu/sean-mcmahon">Sean McMahon</a> <br><small class="roles"> Author, reviewer </small>  </li>
<li>
<a href="https://forestgeo.si.edu/kristina-j-anderson-teixeira">Kristina Teixeira</a> <br><small class="roles"> Author, reviewer </small>  </li>
<li>
<a href="http://www.forestgeo.si.edu/">CTFS-ForestGEO</a> <br><small class="roles"> Copyright holder, funder </small>  </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="lifecycle"></a></li>
<li><a href="https://travis-ci.org/forestgeo/fgeo.biomass"><img src="https://travis-ci.org/forestgeo/fgeo.biomass.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://coveralls.io/r/forestgeo/fgeo.biomass?branch=master"><img src="https://coveralls.io/repos/github/forestgeo/fgeo.biomass/badge.svg" alt="Coverage status"></a></li>
<li><a href="https://cran.r-project.org/package=fgeo.biomass"><embed src="https://www.r-pkg.org/badges/version/fgeo.biomass"></embed></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/maurolepore">Mauro Lepore</a>, <a href="https://forestgeo.si.edu/arellano-gabriel">Gabriel Arellano</a>, <a href="https://forestgeo.si.edu/stuart-j-davies">Stuart Davies</a>, <a href="https://github.com/gonzalezeb">Erika Gonzalez</a>, <a href="https://forestgeo.si.edu/sean-mcmahon">Sean McMahon</a>, <a href="https://forestgeo.si.edu/kristina-j-anderson-teixeira">Kristina Teixeira</a>, <a href="http://www.forestgeo.si.edu/">CTFS-ForestGEO</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
